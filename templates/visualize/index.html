{% extends "_base.html" %}
{% load static %}

{% block headerstatic %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.9.0/css/bootstrap-slider.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.9.0/bootstrap-slider.js"></script>

  <link rel="stylesheet" href="{% static 'css/ui.css' %}">
  <link rel="stylesheet" href="{% static 'css/maps.css' %}">
  <script>
  //Declared global variable so that it may be referred to be other scripts
    function initMap (){};
  </script>
  <script defer type="text/javascript" src="{% url 'visualize:map' %}" ></script>

  <script defer
    src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLEMAPS_SECRET_KEY }}&libraries=visualization&callback=initMap&region=SG">
  </script>
{% endblock %}

{% block header %}Visualize{% endblock %}
{% block content %}
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
<!-- Stats -->


  <div id="floating-panel">
    <table>
        <tr>
    <button id = "toggleHeatmap" >Toggle Heatmap</button>
    <button id = "changeGradient">Change gradient</button>
    <button id = "changeRadius">Change radius</button>
    <button id = "changeOpacity">Change opacity</button>
    <button id = "showNearby">Show near-by taxis</button>
        </tr>
        <tr>
        <th><div>Average distance away of taxis within 500m:</div><div id="average_dist">"-"</div></th>
        <th><div>Number of taxis within 500m:</div><div id="num">"-"</div></th>
    </tr>
    </table>
  </div>

  <!-- Slider: zero is now, positive is future. -->
  <input type="range" id="minutes" data-slider-id="minutesSlider" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="0">
  <script defer type='text/javascript'>

  </script>

  <!-- Google maps. -->
  <div id="map"></div>

  <!--SVG for charts -->
  <svg class="chart"></svg>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <style>

  .chart rect {
    fill: steelblue;
  }

  .chart text {
    fill: white;
    font: 10px sans-serif;
    text-anchor: end;
  }

  </style>

{% endblock %}
