{% extends "_base.html" %}
{% load static %}
{% block headerstatic %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.9.0/css/bootstrap-slider.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.9.0/bootstrap-slider.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="{% static 'css/ui.css' %}">
<link rel="stylesheet" href="{% static 'css/map.css' %}">
<script>
    //Declared global variable here so that it may be referred to by other scripts
      function initMap (){};
</script>
<script type="text/javascript" src="{% url 'visualize:map' %}" ></script>
<script defer
    src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLEMAPS_SECRET_KEY }}&libraries=visualization,places&callback=initMap&region=SG"></script>
{% endblock %}
{% block content %}
<!--Error Message-->
<div id="container-error">
{% if error_message %}
<p><strong>{{ error_message }}</strong></p>
{% endif %}
</div>
<div id= "map-all">
    <!-- Google maps. -->
    <div id="map"></div>
    <!-- Controls (Bottom) -->
    <div id="container-controls">
        <table>
            <tr>
                <button onclick="toggleHeatmap()">Toggle Heatmap</button>
                <button onclick="changeGradient()">Change gradient</button>
                <button onclick="changeRadius()">Change radius</button>
                <button onclick="changeOpacity()">Change opacity</button>
                <button onclick="showNearby()">Show near-by taxis</button>
            </tr>
        </table>
    </div>
    <script defer type="text/javascript" src="{% url 'visualize:slider' %}" ></script>
    <!--Sliders (top right)-->
    <div id="container-slider">
        <input type="range" id="genTime" data-slider-id="genTimeSlider" type="text" data-slider-min="0" data-slider-max="60" data-slider-step="1" data-slider-value="0" data-slider-reversed="true"><br>
        <input type="range" id="genHeatmap" data-slider-id="genHeatmapSlider" type="text" data-slider-min="0" data-slider-max="60" data-slider-step="1" data-slider-value="0" data-slider-reversed="true"><br>
        <input type="range" id="genHeatmapIntensity" data-slider-id="genHeatmapIntensitySlider" type="text" data-slider-min="1" data-slider-max="10" data-slider-step="1" data-slider-value="0"><br>
        <div class='input-group date' id='datetimepicker'>
            <input type='text' class="form-control"/>
            <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
            </span>
        </div>
    </div>



    <!-- Itinerary table (top left)-->
    <div id = "container-itinerary">
        <table id="itineraryTable">
            <input type="button" id="addRow" value="Add new row">
            <thead>
                <tr>
                    <th>Pickup Location</th>
                    <th>Pickup Time</th>
                    <th>Arrival Location</th>
                    <th>Arrival Time</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <input type="button" id="slider" value="<<">
    </div>
    <!--SVG for charts -->
    <div id="container-chart" >
        <svg class="chart"></svg>
        <div id="chart-title">Title</div>
    </div>
    <

    <!--Local statistics(Right)-->
    <div id = "container-stats">
        <button id="remove-stats" onclick="removeStats()">X</button>
        <div id = "container-stats-bg"></div>
        <table>
            <tr>

                <th> Statistics of taxis within 500m:</th>
            <tr>
                <td>
                    <div>Average distance:</div>
                    <div id="average_dist">"-"</div>
                </td>
                <td>
                    <div>Number of taxis:</div>
                    <div id="num">"-"</div>
                </td>
            </tr>
        <table>

    </div>

</div>

<script src="https://d3js.org/d3.v4.min.js"></script>

{% endblock %}
